<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Playlist</title>
    <link rel="stylesheet" href="/styles/editPlaylist.css">
    <script>
        const YOUTUBE_API_KEY = '<%= process.env.YOUTUBE_API_KEY %>';
    </script>
</head>
<body>
    <div class="container" data-playlist-id="<%= playlist.id %>">
        <div class="header">
            <h1>Edit Playlist: <%= playlist.name %></h1>
        </div>
        <div class="content">
            <!-- Form for adding songs using the original method -->
            <form id="original-form" action="/playlists/<%= playlist.id %>/add-song" method="POST">
                <input type="text" name="title" placeholder="Song Title" required>
                <input type="text" name="artist" placeholder="Artist" required>
                <input type="text" name="url" placeholder="Song URL" required>
                <button type="submit" class="button">Add Song</button>
            </form>

            <!-- Form for adding songs using a YouTube URL -->
            <form id="youtube-form">
                <input type="text" id="youtube-url" name="url" placeholder="YouTube URL" required>
                <button type="button" class="button" onclick="addYouTubeSong()">Add YouTube Song</button>
            </form>

            <ul id="song-list">
                <% playlist.songs.forEach(song => { %>
                    <li class="song-item">
                        <span><%= song.title %> by <%= song.artist %></span>
                        <div>
                            <button onclick="showEditForm('<%= song.id %>')" class="button">Edit</button>
                            <form action="/playlists/<%= playlist.id %>/delete-song/<%= song.id %>" method="POST" style="display:inline;">
                                <button type="submit" class="button">Delete</button>
                            </form>
                        </div>
                        <form id="edit-form-<%= song.id %>" action="/playlists/<%= playlist.id %>/edit-song/<%= song.id %>" method="POST" style="display:none;">
                            <input type="text" name="title" value="<%= song.title %>" required>
                            <input type="text" name="artist" value="<%= song.artist %>" required>
                            <input type="text" name="url" value="<%= song.url %>" required>
                            <button type="submit" class="button">Save</button>
                            <button type="button" class="button" onclick="hideEditForm('<%= song.id %>')">Cancel</button>
                        </form>
                    </li>
                <% }) %>
            </ul>
        </div>
        <div class="return-buttons">
            <a href="/playlists" class="button">Back to Playlists</a>
            <a href="/auth/logout" class="button">Logout</a>
        </div>
    </div>
    <script src="/scripts/editPlaylist.js"></script>
</body>
</html>